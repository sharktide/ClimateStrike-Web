<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClimateStrike AI</title>
    <script src="scripts/theme.js"></script>
    <link rel="stylesheet" href="styles/global.css" />
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <script type="module" src="https://get.microsoft.com/badge/ms-store-badge.bundled.js"></script>

    <style>
        .oss img {
            max-width: 375px;
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-left">
            <div class="hamburger" onclick="toggleMenu()">☰</div>
            <div class="logo">ClimateStrike AI</div>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="install.html">Download</a></li>
            <li><a href="index.html#oss">Open Source</a></li>
            <li><a href="security.html">Security Policy</a></li>
        </ul>
    </nav>
    <div class="hero center1">
        <div class="hero-left" style="padding: 40px;">
            <h1>ClimateStrike AI</h1>
            <p>ClimateStrike AI is an open source app for the purpose of the early prediction of natural disasters.</p>
            <div class="hero-buttons">
                <a href="install.html">Install</a>
                <a href="index.html#oss">Open source</a>
                <a href="playground.html" target="_blank">Try it online ➡ </a>
            </div>
        </div>

        <div class="hero-right">
            <img src="img/examples/example1.png" style="padding-right: 10px;"/>
            <img src="img/examples/example2.png" />
        </div>
    </div>
<main style="padding: 40px;">
  <h1 style="text-align: center;">Download ClimateStrike AI</h1>

  <div class="download-container">
    <details class="download-block">
      <summary>Windows</summary>
      <label for="win-arch">Architecture:</label>
      <select id="win-arch" onchange="showBinaries('windows', this.value)">
        <option value="">Select architecture</option>
        <option value="amd64">AMD64</option>
        <option value="arm64">ARM64</option>
        <option value="win32">Win32</option>
      </select>
      <div id="windows-binaries" class="binary-list"></div>
    </details>

    <details class="download-block">
      <summary>macOS</summary>
      <label for="mac-arch">Architecture:</label>
      <select id="mac-arch" onchange="showBinaries('mac', this.value)">
        <option value="">Select architecture</option>
        <option value="apple">Apple Silicon / Intel x86_64</option>
      </select>
      <div id="mac-binaries" class="binary-list"></div>
    </details>

    <details class="download-block">
      <summary>Android</summary>
      <p class="placeholder">Binaries coming soon. Please build from source.</p>
    </details>
  </div>
</main>

<script>
const binaries = {
  windows: {
    amd64: [
      { name: "Installer (.exe)", url: "https://github.com/sharktide/ClimateStrike-App/releases/latest/download/ClimateStrikeAI_x64.exe" },
      { name: "Portable (.zip)", url: "https://github.com/sharktide/ClimateStrike-App/releases/latest/download/ClimateStrike-Unpacked-x64.zip" }
    ],
    arm64: [
      { name: "Installer (.exe)", url: "https://github.com/sharktide/ClimateStrike-App/releases/latest/download/ClimateStrikeAI_aarch64.exe" },
      { name: "Portable (.zip)", url: "https://github.com/sharktide/ClimateStrike-App/releases/latest/download/ClimateStrike-Unpacked-aarch64.zip" }
    ],
    win32: "coming"
  },
  mac: {
    apple: [
      { name: "Installer (.pkg)", url: "https://github.com/sharktide/ClimateStrike-App/releases/latest/download/StrikeAI-1.0.pkg" }
    ],
  }
};

function showBinaries(os, arch) {
  const containerId = `${os}-binaries`;
  const binaryDiv = document.getElementById(containerId);
  binaryDiv.innerHTML = '';

  if (!arch) return;

  const data = binaries[os][arch];
  if (data === 'coming') {
    binaryDiv.innerHTML = `<p class="placeholder">Binaries coming soon. Please build from source.</p>`;
    return;
  }

  data.forEach(file => {
    const link = document.createElement('a');
    link.href = file.url;
    link.textContent = file.name;
    binaryDiv.appendChild(link);
  });

  // Inject Microsoft Store badge for Windows
  if (os === 'windows') {
    const badgeScript = document.createElement('script');
    badgeScript.type = 'module';
    badgeScript.src = 'https://get.microsoft.com/badge/ms-store-badge.bundled.js';
    document.body.appendChild(badgeScript);

    const badge = document.createElement('ms-store-badge');
    badge.setAttribute('productid', '9n067x4gdm7z');
    badge.setAttribute('productname', 'ClimateStrike AI');
    badge.setAttribute('window-mode', 'direct');
    badge.setAttribute('theme', 'auto');
    badge.setAttribute('size', 'small');
    badge.setAttribute('language', 'en-us');
    badge.setAttribute('animation', 'off');

    binaryDiv.appendChild(badge);
  }
}
</script>



</body>
</html>
